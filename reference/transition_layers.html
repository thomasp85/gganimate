<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Build up a plot, layer by layer — transition_layers • gganimate</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/yeti/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.1/css/all.min.css" integrity="sha256-PbSmjxuVAzJ6FPvNYsrXygfGhNJYyZ2GktDbkMBqQZg=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.1/css/v4-shims.min.css" integrity="sha256-A6jcAdwFD48VMjlI3GDxUd+eCQa7/KWy6G9oe/ovaPA=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>


<!-- docsearch -->
<script src="../docsearch.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous" />
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>



<meta property="og:title" content="Build up a plot, layer by layer — transition_layers" />
<meta property="og:description" content="This transition gradually adds layers to the plot in the order they have been
defined. By default prior layers are kept for the remainder of the animation,
but they can also be set to be removed as the next layer enters." />
<meta property="og:image" content="https://gganimate.com/logo.png" />
<meta name="twitter:card" content="summary" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-84380701-2"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-84380701-2');
</script>


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">gganimate</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0.3.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/gganimate.html">Getting Started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../articles/extra/talks.html">Talks</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    News
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="dropdown-header">Release notes</li>
    <li>
      <a href="https://www.data-imaginist.com/2019/gganimate-has-transitioned-to-a-state-of-release/">Version 1.0.0</a>
    </li>
    <li class="divider"></li>
    <li>
      <a href="../news/index.html">Change log</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/thomasp85/gganimate">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
      <form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
        </div>
      </form>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Build up a plot, layer by layer</h1>
    <small class="dont-index">Source: <a href='https://github.com/thomasp85/gganimate/blob/master/R/transition-layers.R'><code>R/transition-layers.R</code></a></small>
    <div class="hidden name"><code>transition_layers.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This transition gradually adds layers to the plot in the order they have been
defined. By default prior layers are kept for the remainder of the animation,
but they can also be set to be removed as the next layer enters.</p>
    </div>

    <pre class="usage"><span class='fu'>transition_layers</span>(<span class='kw'>layer_length</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='kw'>transition_length</span> <span class='kw'>=</span> <span class='fl'>1</span>,
  <span class='kw'>keep_layers</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>from_blank</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>layer_order</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>layer_names</span> <span class='kw'>=</span> <span class='kw'>NULL</span>)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>layer_length</th>
      <td><p>The proportional time to pause at each layer before a new
one enters</p></td>
    </tr>
    <tr>
      <th>transition_length</th>
      <td><p>The proportional time to use for the entrance of a
new layer</p></td>
    </tr>
    <tr>
      <th>keep_layers</th>
      <td><p>Either an integer indicating for how many following layers
the layers should stay on screen or a logical. In the case of the later,
<code>TRUE</code> will mean keep the layer for the remainder of the animation
(equivalent to setting it to <code>Inf</code>) and <code>FALSE</code> will mean to transition the
layer out as the next layer enters.</p></td>
    </tr>
    <tr>
      <th>from_blank</th>
      <td><p>Should the first layer transition in or be present on the
onset of the animation</p></td>
    </tr>
    <tr>
      <th>layer_order</th>
      <td><p>An alternative order the layers should appear in (default
to using the stacking order). All other arguments that references the layers
index in some way refers to this order.</p></td>
    </tr>
    <tr>
      <th>layer_names</th>
      <td><p>A character vector of names for each layers, to be used
when interpreting label literals</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="label-variables"><a class="anchor" href="#label-variables"></a>Label variables</h2>

    

<p><code>transition_layers</code> makes the following variables available for string
literal interpretation, in addition to the general ones provided by
<code><a href='animate.html'>animate()</a></code>:</p><ul>
<li><p><strong>transitioning</strong> is a boolean indicating whether the frame is part of the
transitioning phase</p></li>
<li><p><strong>previous_layer</strong> The name of the last layer the animation was showing</p></li>
<li><p><strong>closest_layer</strong> The name of the layer the animation is closest to showing</p></li>
<li><p><strong>next_layer</strong> The name of the next layer the animation will show</p></li>
<li><p><strong>nlayers</strong> The total number of layers</p></li>
</ul>

    <h2 class="hasAnchor" id="object-permanence"><a class="anchor" href="#object-permanence"></a>Object permanence</h2>

    

<p><code>transition_layer</code> does not link rows across data to the same graphic
element, so elements will be defined uniquely by each row and the enter and
exit of the layer it belongs to.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p>Other transitions: <code><a href='transition_components.html'>transition_components</a></code>,
  <code><a href='transition_events.html'>transition_events</a></code>,
  <code><a href='transition_filter.html'>transition_filter</a></code>,
  <code><a href='transition_manual.html'>transition_manual</a></code>,
  <code><a href='transition_null.html'>transition_null</a></code>,
  <code><a href='transition_reveal.html'>transition_reveal</a></code>,
  <code><a href='transition_states.html'>transition_states</a></code>,
  <code><a href='transition_time.html'>transition_time</a></code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># Default is to use layer order and keep layers for duration of animation</span>
<span class='no'>anim</span> <span class='kw'>&lt;-</span> <span class='fu'>ggplot</span>(<span class='no'>mtcars</span>, <span class='fu'>aes</span>(<span class='no'>mpg</span>, <span class='no'>disp</span>)) +
  <span class='fu'>geom_point</span>() +
  <span class='fu'>geom_smooth</span>(<span class='kw'>colour</span> <span class='kw'>=</span> <span class='st'>'grey'</span>, <span class='kw'>se</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>) +
  <span class='fu'>geom_smooth</span>(<span class='fu'>aes</span>(<span class='kw'>colour</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>factor</a></span>(<span class='no'>gear</span>))) +
  <span class='fu'>transition_layers</span>(<span class='kw'>layer_length</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='kw'>transition_length</span> <span class='kw'>=</span> <span class='fl'>2</span>) +
  <span class='fu'><a href='enter_exit.html'>enter_fade</a></span>() + <span class='fu'><a href='enter_exit.html'>enter_grow</a></span>()

<span class='co'># Start with the first layer already present</span>
<span class='no'>anim1</span> <span class='kw'>&lt;-</span> <span class='fu'>ggplot</span>(<span class='no'>mtcars</span>, <span class='fu'>aes</span>(<span class='no'>mpg</span>, <span class='no'>disp</span>)) +
  <span class='fu'>geom_point</span>() +
  <span class='fu'>geom_smooth</span>(<span class='kw'>colour</span> <span class='kw'>=</span> <span class='st'>'grey'</span>, <span class='kw'>se</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>) +
  <span class='fu'>geom_smooth</span>(<span class='fu'>aes</span>(<span class='kw'>colour</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>factor</a></span>(<span class='no'>gear</span>))) +
  <span class='fu'>transition_layers</span>(<span class='kw'>layer_length</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='kw'>transition_length</span> <span class='kw'>=</span> <span class='fl'>2</span>,
                    <span class='kw'>from_blank</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>) +
  <span class='fu'><a href='enter_exit.html'>enter_fade</a></span>() + <span class='fu'><a href='enter_exit.html'>enter_grow</a></span>()

<span class='co'># Change the order of the layers</span>
<span class='no'>anim2</span> <span class='kw'>&lt;-</span> <span class='fu'>ggplot</span>(<span class='no'>mtcars</span>, <span class='fu'>aes</span>(<span class='no'>mpg</span>, <span class='no'>disp</span>)) +
  <span class='fu'>geom_point</span>() +
  <span class='fu'>geom_smooth</span>(<span class='kw'>colour</span> <span class='kw'>=</span> <span class='st'>'grey'</span>, <span class='kw'>se</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>) +
  <span class='fu'>geom_smooth</span>(<span class='fu'>aes</span>(<span class='kw'>colour</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>factor</a></span>(<span class='no'>gear</span>))) +
  <span class='fu'>transition_layers</span>(<span class='kw'>layer_length</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='kw'>transition_length</span> <span class='kw'>=</span> <span class='fl'>2</span>,
                    <span class='kw'>from_blank</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>layer_order</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>3</span>, <span class='fl'>1</span>, <span class='fl'>2</span>)) +
  <span class='fu'><a href='enter_exit.html'>enter_fade</a></span>() + <span class='fu'><a href='enter_exit.html'>enter_grow</a></span>()

<span class='co'># Keep layer 1 for the whole animation, but remove the 2nd layer as the 3rd</span>
<span class='co'># enters</span>
<span class='no'>anim3</span> <span class='kw'>&lt;-</span> <span class='fu'>ggplot</span>(<span class='no'>mtcars</span>, <span class='fu'>aes</span>(<span class='no'>mpg</span>, <span class='no'>disp</span>)) +
  <span class='fu'>geom_point</span>() +
  <span class='fu'>geom_smooth</span>(<span class='kw'>colour</span> <span class='kw'>=</span> <span class='st'>'grey'</span>, <span class='kw'>se</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>) +
  <span class='fu'>geom_smooth</span>(<span class='fu'>aes</span>(<span class='kw'>colour</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>factor</a></span>(<span class='no'>gear</span>))) +
  <span class='fu'>transition_layers</span>(<span class='kw'>layer_length</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='kw'>transition_length</span> <span class='kw'>=</span> <span class='fl'>2</span>,
                    <span class='kw'>from_blank</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>keep_layers</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>Inf</span>, <span class='fl'>0</span>, <span class='fl'>0</span>)) +
  <span class='fu'><a href='enter_exit.html'>enter_fade</a></span>() + <span class='fu'><a href='enter_exit.html'>enter_grow</a></span>() +
  <span class='fu'><a href='enter_exit.html'>exit_fade</a></span>() + <span class='fu'><a href='enter_exit.html'>exit_shrink</a></span>()</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      <li><a href="#label-variables">Label variables</a></li>
      <li><a href="#object-permanence">Object permanence</a></li>
      <li><a href="#see-also">See also</a></li>
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by <a href='https://data-imaginist.com'>Thomas Lin Pedersen</a>, <a href='http://varianceexplained.org'>David Robinson</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.9000.</p>
</div>

      </footer>
   </div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script>
<script>
  docsearch({
    
    
    apiKey: 'ee1fa0fd61e4ffed26fdeaf44ebdd541',
    indexName: 'gganimate',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>



  </body>
</html>


